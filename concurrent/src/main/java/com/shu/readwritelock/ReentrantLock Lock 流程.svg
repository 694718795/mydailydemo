<svg id="SvgjsSvg2154" width="1421.875" height="846.015625" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs"><defs id="SvgjsDefs2155"><marker id="SvgjsMarker2184" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2185" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2206" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2207" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2216" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2217" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2236" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2237" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2283" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2284" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2331" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2332" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2341" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2342" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2357" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2358" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2361" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2362" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2365" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2366" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2369" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2370" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2411" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2412" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2415" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2416" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2419" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2420" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2423" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2424" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2427" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2428" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2439" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2440" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2443" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2444" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2447" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2448" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2451" markerWidth="16" markerHeight="12" refX="16" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse"><path id="SvgjsPath2452" d="M0,2 L14,6 L0,11 L0,2" fill="#323232" stroke="#323232" stroke-width="2"></path></marker></defs><g id="SvgjsG2156" transform="translate(38.875,25)"><path id="SvgjsPath2157" d="M 0 0L 121 0L 121 70L 0 70Z" stroke="#323232" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2158"><text id="SvgjsText2159" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="90" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="25.05" transform="rotate(0)"><tspan id="SvgjsTspan2160" dy="16" x="60.5"><tspan id="SvgjsTspan2161" style="text-decoration:;">ReentrantLock</tspan></tspan></text></g></g><g id="SvgjsG2162" transform="translate(366.875,25)"><path id="SvgjsPath2163" d="M 0 0L 100 0L 100 70L 0 70Z" stroke="#323232" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2164"><text id="SvgjsText2165" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="76" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="17.05" transform="rotate(0)"><tspan id="SvgjsTspan2166" dy="16" x="50"><tspan id="SvgjsTspan2167" style="text-decoration:;">Sync</tspan></tspan><tspan id="SvgjsTspan2168" dy="16" x="50"><tspan id="SvgjsTspan2169" style="text-decoration:;">NonfairSync</tspan></tspan></text></g></g><g id="SvgjsG2170" transform="translate(717.375,47)"><path id="SvgjsPath2171" d="M 0 0L 359.5 0L 359.5 48L 0 48Z" stroke="#323232" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2172"><text id="SvgjsText2173" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="27" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="14.05" transform="rotate(0)"><tspan id="SvgjsTspan2174" dy="16" x="180"><tspan id="SvgjsTspan2175" style="text-decoration:;">AQS</tspan></tspan></text></g></g><g id="SvgjsG2176" transform="translate(49.375,139)"><path id="SvgjsPath2177" d="M 0 4Q 0 0 4 0L 96 0Q 100 0 100 4L 100 66Q 100 70 96 70L 4 70Q 0 70 0 66Z" stroke="#323232" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2178"><text id="SvgjsText2179" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="37" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="25.05" transform="rotate(0)"><tspan id="SvgjsTspan2180" dy="16" x="50"><tspan id="SvgjsTspan2181" style="text-decoration:;">lock();</tspan></tspan></text></g></g><g id="SvgjsG2182"><path id="SvgjsPath2183" d="M149.375 174L258.125 174L258.125 174L366.875 174" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2184)"></path></g><g id="SvgjsG2186" transform="translate(366.875,139)"><path id="SvgjsPath2187" d="M 0 4Q 0 0 4 0L 96 0Q 100 0 100 4L 100 66Q 100 70 96 70L 4 70Q 0 70 0 66Z" stroke="#323232" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2188"><text id="SvgjsText2189" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="37" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="25.05" transform="rotate(0)"><tspan id="SvgjsTspan2190" dy="16" x="50"><tspan id="SvgjsTspan2191" style="text-decoration:;">lock();</tspan></tspan></text></g></g><g id="SvgjsG2192" transform="translate(660.875,139)"><path id="SvgjsPath2193" d="M 0 4Q 0 0 4 0L 209 0Q 213 0 213 4L 213 66Q 213 70 209 70L 4 70Q 0 70 0 66Z" stroke="#323232" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2194"><text id="SvgjsText2195" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="170" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="25.05" transform="rotate(0)"><tspan id="SvgjsTspan2196" dy="16" x="106.5"><tspan id="SvgjsTspan2197" style="text-decoration:;">setExclusiveOwnerThread();</tspan></tspan></text></g></g><g id="SvgjsG2198" transform="translate(660.875,263)"><path id="SvgjsPath2199" d="M 0 4Q 0 0 4 0L 209 0Q 213 0 213 4L 213 67Q 213 71 209 71L 4 71Q 0 71 0 67Z" stroke="#323232" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2200"><text id="SvgjsText2201" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="65" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="25.55" transform="rotate(0)"><tspan id="SvgjsTspan2202" dy="16" x="106.5"><tspan id="SvgjsTspan2203" style="text-decoration:;">acquire(1);</tspan></tspan></text></g></g><g id="SvgjsG2204"><path id="SvgjsPath2205" d="M767.375 334L767.375 357.5L166.875 357.5" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2206)"></path></g><g id="SvgjsG2208" transform="translate(31.875,322)"><path id="SvgjsPath2209" d="M 0 4Q 0 0 4 0L 131 0Q 135 0 135 4L 135 67Q 135 71 131 71L 4 71Q 0 71 0 67Z" stroke="#323232" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2210"><text id="SvgjsText2211" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="81" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="25.55" transform="rotate(0)"><tspan id="SvgjsTspan2212" dy="16" x="67.5"><tspan id="SvgjsTspan2213" style="text-decoration:;">tryAcquire(1)</tspan></tspan></text></g></g><g id="SvgjsG2214"><path id="SvgjsPath2215" d="M99.375 393L99.375 412L99.375 412L99.375 431" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2216)"></path></g><g id="SvgjsG2218" transform="translate(25,431)"><path id="SvgjsPath2219" d="M 0 4Q 0 0 4 0L 144.75 0Q 148.75 0 148.75 4L 148.75 71Q 148.75 75 144.75 75L 4 75Q 0 75 0 71Z" stroke="#323232" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2220"><text id="SvgjsText2221" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="128" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="27.55" transform="rotate(0)"><tspan id="SvgjsTspan2222" dy="16" x="74.5"><tspan id="SvgjsTspan2223" style="text-decoration:;">nonfairTryAcquire(1)</tspan></tspan></text></g></g><g id="SvgjsG2224" transform="translate(211.875,444)"><path id="SvgjsPath2225" d="M 0 0L 92 0L 108 16L 108 49L 0 49L 0 0Z" stroke="none" fill-opacity="1" fill="#ffffaa"></path><path id="SvgjsPath2226" d="M 92 0L 92 16L 108 16Z" stroke="none" fill-opacity="1" fill="#cdcdcd"></path><path id="SvgjsPath2227" d="M 0 0L 92 0L 108 16L 108 49L 0 49L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG2228"><text id="SvgjsText2229" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="76" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="6.55" transform="rotate(0)"><tspan id="SvgjsTspan2230" dy="16" x="54"><tspan id="SvgjsTspan2231" style="text-decoration:;">锁状态恢复0, </tspan></tspan><tspan id="SvgjsTspan2232" dy="16" x="54"><tspan id="SvgjsTspan2233" style="text-decoration:;">继续抢锁</tspan></tspan></text></g></g><g id="SvgjsG2234"><path id="SvgjsPath2235" d="M173.75 468.5L192.8125 468.5L192.8125 468.5L211.875 468.5" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2236)"></path></g><g id="SvgjsG2238" transform="translate(660.875,431)"><path id="SvgjsPath2239" d="M 0 4Q 0 0 4 0L 209 0Q 213 0 213 4L 213 71Q 213 75 209 75L 4 75Q 0 75 0 71Z" stroke="#323232" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2240"><text id="SvgjsText2241" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="188" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="19.55" transform="rotate(0)"><tspan id="SvgjsTspan2242" dy="16" x="106.5"><tspan id="SvgjsTspan2243" style="text-decoration:;">acquireQueued(addWaiter(No</tspan></tspan><tspan id="SvgjsTspan2244" dy="16" x="106.5"><tspan id="SvgjsTspan2245" style="text-decoration:;">de.EXCLUSIVE), 1))</tspan></tspan></text></g></g><g id="SvgjsG2246" transform="translate(926.875,437.5)"><path id="SvgjsPath2247" d="M 0 4Q 0 0 4 0L 209 0Q 213 0 213 4L 213 58Q 213 62 209 62L 4 62Q 0 62 0 58Z" stroke="#323232" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2248"><text id="SvgjsText2249" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="179" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="21.05" transform="rotate(0)"><tspan id="SvgjsTspan2250" dy="16" x="106.5"><tspan id="SvgjsTspan2251" style="text-decoration:;">addWaiter(Node.EXCLUSIVE)</tspan></tspan></text></g></g><g id="SvgjsG2252" transform="translate(909.875,563)"><path id="SvgjsPath2253" d="M 0 4Q 0 0 4 0L 243 0Q 247 0 247 4L 247 68Q 247 72 243 72L 4 72Q 0 72 0 68Z" stroke="#323232" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2254"><text id="SvgjsText2255" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="210" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="10.05" transform="rotate(0)"><tspan id="SvgjsTspan2256" dy="16" x="123.5"><tspan id="SvgjsTspan2257" style="text-decoration:;font-size: inherit;">// </tspan><tspan id="SvgjsTspan2258" style="text-decoration:;">设置自己的前节点为现在的尾节点</tspan></tspan><tspan id="SvgjsTspan2259" dy="16" x="123.5"><tspan id="SvgjsTspan2260" style="text-decoration:;font-size: inherit;">// 使用CAS设置等待队列尾节点</tspan></tspan><tspan id="SvgjsTspan2261" dy="16" x="123.5"><tspan id="SvgjsTspan2262" style="text-decoration:;">compareAndSetTail(pred, node);</tspan></tspan></text></g></g><g id="SvgjsG2263" transform="translate(969.0271109586956,518.7037037037036)"><path id="SvgjsPath2264" d="M 0 0L 112.66666666666583 0L 128.66666666666583 16L 128.66666666666583 24.111111111111313L 0 24.111111111111313L 0 0Z" stroke="none" fill-opacity="1" fill="#ffffaa"></path><path id="SvgjsPath2265" d="M 112.66666666666583 0L 112.66666666666583 16L 128.66666666666583 16Z" stroke="none" fill-opacity="1" fill="#cdcdcd"></path><path id="SvgjsPath2266" d="M 0 0L 112.66666666666583 0L 128.66666666666583 16L 128.66666666666583 24.111111111111313L 0 24.111111111111313L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG2267"><text id="SvgjsText2268" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="91" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="2.1055555555556564" transform="rotate(0)"><tspan id="SvgjsTspan2269" dy="16" x="64.5"><tspan id="SvgjsTspan2270" style="text-decoration:;">阻塞队列不为空</tspan></tspan></text></g></g><g id="SvgjsG2271" transform="translate(909.875,740)"><path id="SvgjsPath2272" d="M 0 4Q 0 0 4 0L 243 0Q 247 0 247 4L 247 68Q 247 72 243 72L 4 72Q 0 72 0 68Z" stroke="#323232" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2273"><text id="SvgjsText2274" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="216" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="10.05" transform="rotate(0)"><tspan id="SvgjsTspan2275" dy="16" x="123.5"><tspan id="SvgjsTspan2276" style="text-decoration:;font-size: inherit;">// 循环CAS设置队尾节点为自己, 直到</tspan></tspan><tspan id="SvgjsTspan2277" dy="16" x="123.5"><tspan id="SvgjsTspan2278" style="text-decoration:;font-size: inherit;">成功</tspan></tspan><tspan id="SvgjsTspan2279" dy="16" x="123.5"><tspan id="SvgjsTspan2280" style="text-decoration:;">enq(node);</tspan></tspan></text></g></g><g id="SvgjsG2281"><path id="SvgjsPath2282" d="M1033.375 635L1033.375 658.375L1033.375 658.375L1033.375 681.75" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2283)"></path></g><g id="SvgjsG2285" transform="translate(956.375,681.75)"><path id="SvgjsPath2286" d="M 0 0L 138 0L 154 16L 154 32L 0 32L 0 0Z" stroke="none" fill-opacity="1" fill="#ffffaa"></path><path id="SvgjsPath2287" d="M 138 0L 138 16L 154 16Z" stroke="none" fill-opacity="1" fill="#cdcdcd"></path><path id="SvgjsPath2288" d="M 0 0L 138 0L 154 16L 154 32L 0 32L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG2289"><text id="SvgjsText2290" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="-9.95" transform="rotate(0)"><tspan id="SvgjsTspan2291" dy="16" x="77"><tspan id="SvgjsTspan2292" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan2293" dy="16" x="77"><tspan id="SvgjsTspan2294" style="text-decoration:;"> CAS设置尾节点失败</tspan></tspan><tspan id="SvgjsTspan2295" dy="16" x="77"><tspan id="SvgjsTspan2296" style="text-decoration:;"> </tspan></tspan></text></g></g><g id="SvgjsG2297" transform="translate(1164.875,732.6543209876543)"><path id="SvgjsPath2298" d="M 0 0L 216.33333333333326 0L 232.33333333333326 16L 232.33333333333326 84.72222222222217L 0 84.72222222222217L 0 0Z" stroke="none" fill-opacity="1" fill="#ffffaa"></path><path id="SvgjsPath2299" d="M 216.33333333333326 0L 216.33333333333326 16L 232.33333333333326 16Z" stroke="none" fill-opacity="1" fill="#cdcdcd"></path><path id="SvgjsPath2300" d="M 0 0L 216.33333333333326 0L 232.33333333333326 16L 232.33333333333326 84.72222222222217L 0 84.72222222222217L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG2301"><text id="SvgjsText2302" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="189" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="-15.588888888888913" transform="rotate(0)"><tspan id="SvgjsTspan2303" dy="16" x="116.5"><tspan id="SvgjsTspan2304" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan2305" dy="16" x="116.5"><tspan id="SvgjsTspan2306" style="text-decoration:;">等待队列为空时, 需要先做初始化</tspan></tspan><tspan id="SvgjsTspan2307" dy="16" x="116.5"><tspan id="SvgjsTspan2308" style="text-decoration:;">CAS初始化头节点</tspan></tspan><tspan id="SvgjsTspan2309" dy="16" x="116.5"><tspan id="SvgjsTspan2310" style="text-decoration:;">成功</tspan></tspan><tspan id="SvgjsTspan2311" dy="16" x="116.5"><tspan id="SvgjsTspan2312" style="text-decoration:;">设置尾节点为头节点</tspan></tspan><tspan id="SvgjsTspan2313" dy="16" x="116.5"><tspan id="SvgjsTspan2314" style="text-decoration:;">初始化的头节点无对应线程</tspan></tspan><tspan id="SvgjsTspan2315" dy="16" x="116.5"><tspan id="SvgjsTspan2316" style="text-decoration:;"> </tspan></tspan></text></g></g><g id="SvgjsG2317" transform="translate(1215.875,585.5)"><path id="SvgjsPath2318" d="M 0 0L 103 0L 119 16L 119 27L 0 27L 0 0Z" stroke="none" fill-opacity="1" fill="#ffffaa"></path><path id="SvgjsPath2319" d="M 103 0L 103 16L 119 16Z" stroke="none" fill-opacity="1" fill="#cdcdcd"></path><path id="SvgjsPath2320" d="M 0 0L 103 0L 119 16L 119 27L 0 27L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG2321"><text id="SvgjsText2322" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="78" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="-12.45" transform="rotate(0)"><tspan id="SvgjsTspan2323" dy="16" x="59.5"><tspan id="SvgjsTspan2324" style="text-decoration:;"> </tspan></tspan><tspan id="SvgjsTspan2325" dy="16" x="59.5"><tspan id="SvgjsTspan2326" style="text-decoration:;">阻塞队列为空</tspan></tspan><tspan id="SvgjsTspan2327" dy="16" x="59.5"><tspan id="SvgjsTspan2328" style="text-decoration:;"> </tspan></tspan></text></g></g><g id="SvgjsG2329"><path id="SvgjsPath2330" d="M873.875 468.5L900.375 468.5L900.375 468.5L926.875 468.5" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2331)"></path></g><g id="SvgjsG2333" transform="translate(660.875,563)"><path id="SvgjsPath2334" d="M 0 4Q 0 0 4 0L 209 0Q 213 0 213 4L 213 71Q 213 75 209 75L 4 75Q 0 75 0 71Z" stroke="#323232" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2335"><text id="SvgjsText2336" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="151" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="27.55" transform="rotate(0)"><tspan id="SvgjsTspan2337" dy="16" x="106.5"><tspan id="SvgjsTspan2338" style="text-decoration:;">acquireQueued(node, 1)</tspan></tspan></text></g></g><g id="SvgjsG2339"><path id="SvgjsPath2340" d="M767.375 506L767.375 534.5L767.375 534.5L767.375 563" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2341)"></path></g><g id="SvgjsG2343" transform="translate(461.875,567.25)"><path id="SvgjsPath2344" d="M 0 0L 173 0L 189 16L 189 66.5L 0 66.5L 0 0Z" stroke="none" fill-opacity="1" fill="#ffffaa"></path><path id="SvgjsPath2345" d="M 173 0L 173 16L 189 16Z" stroke="none" fill-opacity="1" fill="#cdcdcd"></path><path id="SvgjsPath2346" d="M 0 0L 173 0L 189 16L 189 66.5L 0 66.5L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG2347"><text id="SvgjsText2348" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="150" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="7.3" transform="rotate(0)"><tspan id="SvgjsTspan2349" dy="16" x="94.5"><tspan id="SvgjsTspan2350" style="text-decoration:;">前节点是头节点, 抢占锁</tspan></tspan><tspan id="SvgjsTspan2351" dy="16" x="94.5"><tspan id="SvgjsTspan2352" style="text-decoration:;">抢到锁, 设置头节点为自己</tspan></tspan><tspan id="SvgjsTspan2353" dy="16" x="94.5"><tspan id="SvgjsTspan2354" style="text-decoration:;">否则, 阻塞</tspan></tspan></text></g></g><g id="SvgjsG2355"><path id="SvgjsPath2356" d="M1033.375 713.75L1033.375 726.875L1033.375 726.875L1033.375 740" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2357)"></path></g><g id="SvgjsG2359"><path id="SvgjsPath2360" d="M1139.875 468.5L1275.375 468.5L1275.375 585.5" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2361)"></path></g><g id="SvgjsG2363"><path id="SvgjsPath2364" d="M1033.375 499.5L1033.375 509.10185185185173L1033.3604442920287 509.10185185185173L1033.3604442920287 518.7037037037036" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2365)"></path></g><g id="SvgjsG2367"><path id="SvgjsPath2368" d="M1033.3604442920287 542.8148148148149L1033.3604442920287 552.9074074074074L1033.375 552.9074074074074L1033.375 563" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2369)"></path></g><g id="SvgjsG2371" transform="translate(425.875,393)"><path id="SvgjsPath2372" d="M 0 0L 93 0L 109 16L 109 38L 0 38L 0 0Z" stroke="none" fill-opacity="1" fill="#ffffaa"></path><path id="SvgjsPath2373" d="M 93 0L 93 16L 109 16Z" stroke="none" fill-opacity="1" fill="#cdcdcd"></path><path id="SvgjsPath2374" d="M 0 0L 93 0L 109 16L 109 38L 0 38L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG2375"><text id="SvgjsText2376" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="52" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="9.05" transform="rotate(0)"><tspan id="SvgjsTspan2377" dy="16" x="54.5"><tspan id="SvgjsTspan2378" style="text-decoration:;">抢占成功</tspan></tspan></text></g></g><g id="SvgjsG2379" transform="translate(487.875,231)"><path id="SvgjsPath2380" d="M 0 0L 98 0L 114 16L 114 32L 0 32L 0 0Z" stroke="none" fill-opacity="1" fill="#ffffaa"></path><path id="SvgjsPath2381" d="M 98 0L 98 16L 114 16Z" stroke="none" fill-opacity="1" fill="#cdcdcd"></path><path id="SvgjsPath2382" d="M 0 0L 98 0L 114 16L 114 32L 0 32L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG2383"><text id="SvgjsText2384" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="77" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="6.05" transform="rotate(0)"><tspan id="SvgjsTspan2385" dy="16" x="57"><tspan id="SvgjsTspan2386" style="text-decoration:;">CAS没拿到锁</tspan></tspan></text></g></g><g id="SvgjsG2387" transform="translate(595.875,97.5)"><path id="SvgjsPath2388" d="M 0 0L 19 0L 35 16L 35 153L 0 153L 0 0Z" stroke="none" fill-opacity="1" fill="#ffffaa"></path><path id="SvgjsPath2389" d="M 19 0L 19 16L 35 16Z" stroke="none" fill-opacity="1" fill="#cdcdcd"></path><path id="SvgjsPath2390" d="M 0 0L 19 0L 35 16L 35 153L 0 153L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG2391"><text id="SvgjsText2392" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="13" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="10.55" transform="rotate(0)"><tspan id="SvgjsTspan2393" dy="16" x="17.5"><tspan id="SvgjsTspan2394" style="text-decoration:;">C</tspan></tspan><tspan id="SvgjsTspan2395" dy="16" x="17.5"><tspan id="SvgjsTspan2396" style="text-decoration:;">A</tspan></tspan><tspan id="SvgjsTspan2397" dy="16" x="17.5"><tspan id="SvgjsTspan2398" style="text-decoration:;">S</tspan></tspan><tspan id="SvgjsTspan2399" dy="16" x="17.5"><tspan id="SvgjsTspan2400" style="text-decoration:;">直</tspan></tspan><tspan id="SvgjsTspan2401" dy="16" x="17.5"><tspan id="SvgjsTspan2402" style="text-decoration:;">接</tspan></tspan><tspan id="SvgjsTspan2403" dy="16" x="17.5"><tspan id="SvgjsTspan2404" style="text-decoration:;">拿</tspan></tspan><tspan id="SvgjsTspan2405" dy="16" x="17.5"><tspan id="SvgjsTspan2406" style="text-decoration:;">到</tspan></tspan><tspan id="SvgjsTspan2407" dy="16" x="17.5"><tspan id="SvgjsTspan2408" style="text-decoration:;">锁</tspan></tspan></text></g></g><g id="SvgjsG2409"><path id="SvgjsPath2410" d="M466.875 174L544.875 174L544.875 231" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2411)"></path></g><g id="SvgjsG2413"><path id="SvgjsPath2414" d="M544.875 263L544.875 298.5L660.875 298.5" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2415)"></path></g><g id="SvgjsG2417"><path id="SvgjsPath2418" d="M630.875 174L645.875 174L645.875 174L660.875 174" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2419)"></path></g><g id="SvgjsG2421"><path id="SvgjsPath2422" d="M466.875 174L531.375 174L531.375 174L595.875 174" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2423)"></path></g><g id="SvgjsG2425"><path id="SvgjsPath2426" d="M480.375 393L480.375 174L595.875 174" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2427)"></path></g><g id="SvgjsG2429" transform="translate(461.875,449.5)"><path id="SvgjsPath2430" d="M 0 0L 93 0L 109 16L 109 38L 0 38L 0 0Z" stroke="none" fill-opacity="1" fill="#ffffaa"></path><path id="SvgjsPath2431" d="M 93 0L 93 16L 109 16Z" stroke="none" fill-opacity="1" fill="#cdcdcd"></path><path id="SvgjsPath2432" d="M 0 0L 93 0L 109 16L 109 38L 0 38L 0 0Z" stroke="none" fill="none"></path><g id="SvgjsG2433"><text id="SvgjsText2434" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="52" fill="#323232" font-weight="400" align="middle" anchor="middle" family="微软雅黑" size="13px" weight="400" font-style="" y="9.05" transform="rotate(0)"><tspan id="SvgjsTspan2435" dy="16" x="54.5"><tspan id="SvgjsTspan2436" style="text-decoration:;">抢占失败</tspan></tspan></text></g></g><g id="SvgjsG2437"><path id="SvgjsPath2438" d="M319.875 468.5L390.875 468.5L390.875 468.5L461.875 468.5" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2439)"></path></g><g id="SvgjsG2441"><path id="SvgjsPath2442" d="M570.875 468.5L615.875 468.5L615.875 468.5L660.875 468.5" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2443)"></path></g><g id="SvgjsG2445"><path id="SvgjsPath2446" d="M319.875 468.5L372.875 468.5L372.875 412L425.875 412" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2447)"></path></g><g id="SvgjsG2449"><path id="SvgjsPath2450" d="M1275.375 612.5L1275.375 647.125L1033.375 647.125L1033.375 681.75" stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2451)"></path></g></svg>